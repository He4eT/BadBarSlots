<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>BAD BAR Slots</title>
    <link rel="stylesheet" href="css/style.css" type='text/css'>
</head>

<body id="playNormal" class="nocursor">
    <div class="wrap">
        <div class="logo">
            <img src="img/logo.svg" alt="">
        </div>
        <div class="slot-wrap">
            <ul class="slot">
            </ul>
        </div>
    </div>

    <script src="js/jquery.min.js"></script>
    <!-- <script src="js/jquery.easing.1.3.js"></script> -->
    <script src="js/jquery.jSlots.min.js"></script>
    <script>
        let params = location.search.split('=')[1]
        let data = JSON.parse(
            decodeURIComponent(
                decodeURIComponent(params)
            ))

        let items = data.items
            .reduce((sum, cur) => sum + `<li>${cur}</li>`, '')
        
        $('.slot').html(items)
        
        let sound = new Audio('snd/noize.mp3')
        let playSound = () => {
            sound.play()
        }

        $('.slot').jSlots({
            number: data.number,
            spinner : '#playNormal',
            onStart: playSound,
            time : 6000,
        });
    </script>
    <!-- Yandex.Metrika counter -->
    <script type="text/javascript">
        (function (d, w, c) {
            (w[c] = w[c] || []).push(function() {
                try {
                    w.yaCounter44648464 = new Ya.Metrika({
                        id:44648464,
                        clickmap:true,
                        trackLinks:true,
                        accurateTrackBounce:true,
                        webvisor:true
                    });
                } catch(e) { }
            });

            var n = d.getElementsByTagName("script")[0],
                s = d.createElement("script"),
                f = function () { n.parentNode.insertBefore(s, n); };
            s.type = "text/javascript";
            s.async = true;
            s.src = "https://mc.yandex.ru/metrika/watch.js";

            if (w.opera == "[object Opera]") {
                d.addEventListener("DOMContentLoaded", f, false);
            } else { f(); }
        })(document, window, "yandex_metrika_callbacks");
    </script>
    <noscript><div><img src="https://mc.yandex.ru/watch/44648464" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
    <!-- /Yandex.Metrika counter -->
</body>
</html>
